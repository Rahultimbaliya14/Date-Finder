<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Date Calculator Rahul-Timbaliya</title>
</head>
<body>
    
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>
  
  <!-- Modal -->
  <div class="modal fade" id="DateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Details<span id="second"></span></h5>
          <button type="button"  class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" id="close2">&times;</span>
          </button>
        </div>
        <div id="output" class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button"  id="close" class="btn btn-secondary" data-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
  </div>



    <div class="container">
        <div class="center">
        <div class="title">
            <h3> Date Finder   
            </h3>
           
        </div>
        
    <label for="calendar1">Start-Date</label>
    <input type="text" id="calendar1" value="open" />
    <label for="calendar2">End-Date</label>
    <input type="text" id="calendar2" value="" />
    <label for="dropdown1">Filter</label>
    <select id="dropdown1">
        <option value="all">All</option>
        <option value="1st">1st</option>
        <option value="Last">Last</option>
    </select>
    <label for="dropdown2">Day</label>
    <select id="dropdown2">
        <option value="sunday">Sunday</option>
        <option value="monday">Monday</option>
        <option value="tuesday">Tuesday</option>
        <option value="wednesday">Wednesday</option>
        <option value="thursday">Thursday</option>
        <option value="friday">Friday</option>
        <option value="saturday">Saturday</option>
    </select>
    <button id="submitBtn" data-toggle="modal" data-target="#exampleModal">Submit</button>
    
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script>


var count2=10
$('#submitBtn').on('click',function(){
  
  $('#DateModal').modal('show');
  interval2=setInterval(function(){
    count2-=1
    $('#second').html("(Close The Pop-Up In "+count2+")");
  },1000);

  intver2=setInterval(function(){
    $('#DateModal').modal('hide');
    clearInterval(intver2)
    count2+=10 
    clearInterval(interval2)
  },10000);

  
});

$('#close').on('click',function(){
  $('#DateModal').modal('hide');
  count2=10
  clearInterval(intver2)
  clearInterval(interval2)
});






$('#close2').on('click',function(){
  $('#DateModal').modal('hide');
  count2=10
  clearInterval(intver2)
  clearInterval(interval2)
});




    var modal=document.getElementById("DateModal");
     var close=document.getElementById("close");
     close.addEventListener('click',function(){
          
     });

        
        var currentDate = new Date();

       
        var calendar1 = document.getElementById("calendar1");
          
        calendar1.value = currentDate.toISOString().split('T')[0];
        var nextYearDate = new Date(currentDate.getFullYear() + 1, currentDate.getMonth(), currentDate.getDate()+1);


        
        

        


        var calendar2 = document.getElementById("calendar2");
        calendar2.value = nextYearDate.toISOString().split('T')[0];
        var dropdown1 = document.getElementById("dropdown1");   
        var dropdown2 = document.getElementById("dropdown2");
        var dropdown3 = document.getElementById("dropdown3");
        var submitBtn = document.getElementById("submitBtn");



        submitBtn.addEventListener("click", function() {

           if(dropdown1.value=="1st"){
            var givenDate = new Date(calendar1.value);
            var firstSunday = getFirstSundayFromDate(givenDate);
            var text = document.getElementById("output");
            var textday=getdaytext(getday())
            text.innerHTML="The First "+textday+" On : "+firstSunday.toISOString().split('T')[0];
            }
           else if(dropdown1.value=="Last"){

            
            var givenDate = new Date(calendar2.value);
            var firstSunday = getlastSundayFromDate(givenDate);
            var text = document.getElementById("output");
            var textday=getdaytext(getday())
            text.innerHTML="The Last "+textday+" On : "+firstSunday.toISOString().split('T')[0];
           }



           else if(dropdown1.value=="all"){
            var date=new Date(calendar1.value)
            var date2=new Date(calendar2.value)
            var count=0
            var count2=0
            const selectedday = [];
            day=getday()
            while (date <= date2){
              
               if(date.getDay()==day){
                selectedday.push(date.toISOString().split('T')[0])
                
                count+=1
               }
               count2 +=1
               
               date.setDate(date.getDate() + 1);
            }
            var textday=getdaytext(getday())
            console.log(textday)
            var text = document.getElementById("output");
            text.innerHTML="Total "+textday+" : "+count+"<br>Total Days:"+count2+"<hr>All The Days Is Beetwen Date:<br><br>"+selectedday.toString().replaceAll(',','      :   '+textday+' <br>');
            
           }




           
           



        function getdaytext(n){
            var daytext
            if(n==0){
                daytext="Sunday"
            }
            else if(n==1){
                daytext="Monday"
            }
            else if(n==2){
                daytext="Tuesday"
            }
            else if(n==3){
                daytext="Wednesday"
            }
            else if(n==4){
                daytext="Thursday"
            }
            else if(n==5){
                daytext="Friday"
            }
            else{
                daytext="Saturday"
            }
            return daytext
        }


            function getday(){
                var day=0
                if(dropdown2.value=="sunday"){
                    day=0
                }
                else if(dropdown2.value=="monday"){
                    day=1
                }
                else if(dropdown2.value=="tuesday"){
                    day=2
                }
                else if(dropdown2.value=="wednesday"){
                    day=3
                }
                else if(dropdown2.value=="thursday"){
                    day=4
                }
                else if(dropdown2.value=="friday"){
                    day=5
                }
                else{
                    day=6
                }
                return day
            }



        //To get The first Day 
           function getFirstSundayFromDate(date) {
            var current = new Date(date);
            var day=getday()
            var dayOfWeek = current.getDay(); 
            while (dayOfWeek !== day) {
              current.setDate(current.getDate() + 1);
              dayOfWeek = current.getDay();
            }
          
            return current;
          }




         //to Get Last Date 
          function getlastSundayFromDate(date) {
            var current = new Date(date);
            var day=getday()
            var dayOfWeek = current.getDay(); 
            while (dayOfWeek !== day) {
              current.setDate(current.getDate() - 1);
              dayOfWeek = current.getDay();
            }
          
            return current;
          }

        });

        
        
  
    </script>
    <script>
        $(function() {
          $("#calendar1").datepicker({
            showOn: "focus",
            onClose: function() {
              $(this).datepicker("show");
            }
          }).datepicker("show");
        });

    
        $('#calendar1').datepicker().on('change', function (ev) {
            $('#calendar1').Close();
            $('#calendar1').Close();
            $('#calendar1').Close();

        });


        

        $(function() {
            $("#calendar2").datepicker({
              showOn: "focus",
              onClose: function() {
                $(this).datepicker("show");
              }
            }).datepicker("show");
          });
  
      
          $('#calendar2').datepicker().on('change', function (ev) {
              $('#calendar2').Close();
              $('#calendar2').Close();
              $('#calendar2').Close();
  
          });
      </script>

     
      
</body>
</html>